---
ms.date: 06/12/2017
ms.topic: conceptual
keywords: wmf,powershell,installazione
contributor: jianyunt, quoctruong
title: Miglioramenti della gestione pacchetti in WMF 5.1
ms.openlocfilehash: 30ef59ed9dc0d56636d85cc6e53523a9a73963a4
ms.sourcegitcommit: e7445ba8203da304286c591ff513900ad1c244a4
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 04/23/2019
ms.locfileid: "62055616"
---
# <a name="improvements-to-package-management-in-wmf-51"></a><span data-ttu-id="f02ab-103">Miglioramenti della gestione pacchetti in WMF 5.1</span><span class="sxs-lookup"><span data-stu-id="f02ab-103">Improvements to Package Management in WMF 5.1</span></span>

## <a name="improvements-in-packagemanagement"></a><span data-ttu-id="f02ab-104">Miglioramenti appartati a Gestione pacchetti</span><span class="sxs-lookup"><span data-stu-id="f02ab-104">Improvements in PackageManagement</span></span>

<span data-ttu-id="f02ab-105">Di seguito vengono descritte le correzioni apportate in WMF 5.1:</span><span class="sxs-lookup"><span data-stu-id="f02ab-105">The following are the fixes made in the WMF 5.1:</span></span>

### <a name="version-alias"></a><span data-ttu-id="f02ab-106">Alias della versione</span><span class="sxs-lookup"><span data-stu-id="f02ab-106">Version Alias</span></span>

<span data-ttu-id="f02ab-107">**Scenario**: Se sono presenti le versioni 1.0 e 2.0 di un pacchetto, P1, installate nel sistema e si vuole disinstallare la versione 1.0, è necessario eseguire `Uninstall-Package -Name P1 -Version 1.0` e attendere che la versione 1.0 venga disinstallata dopo l'esecuzione del cmdlet.</span><span class="sxs-lookup"><span data-stu-id="f02ab-107">**Scenario**: If you have version 1.0 and 2.0 of a package, P1, installed on your system, and you want to uninstall version 1.0, you would run `Uninstall-Package -Name P1 -Version 1.0` and expect version 1.0 to be uninstalled after running the cmdlet.</span></span> <span data-ttu-id="f02ab-108">Tuttavia, il risultato è che viene disinstallata la versione 2.0.</span><span class="sxs-lookup"><span data-stu-id="f02ab-108">However the result is that version 2.0 gets uninstalled.</span></span>

<span data-ttu-id="f02ab-109">Ciò si verifica perché il parametro `-Version` è un alias del parametro `-MinimumVersion`.</span><span class="sxs-lookup"><span data-stu-id="f02ab-109">This occurs because the `-Version` parameter is an alias of the `-MinimumVersion` parameter.</span></span> <span data-ttu-id="f02ab-110">Quando PackageManagement esegue la ricerca di un pacchetto qualificato con la versione minima 1.0, restituisce la versione più recente.</span><span class="sxs-lookup"><span data-stu-id="f02ab-110">When PackageManagement is looking for a qualified package with the minimum version of 1.0, it returns the latest version.</span></span> <span data-ttu-id="f02ab-111">Questo comportamento è previsto nei casi normali, perché trovare la versione più recente è in genere il risultato desiderato.</span><span class="sxs-lookup"><span data-stu-id="f02ab-111">This behavior is expected in normal cases because finding the latest version is usually the desired result.</span></span> <span data-ttu-id="f02ab-112">Tuttavia, non dovrebbe applicarsi al caso di `Uninstall-Package`.</span><span class="sxs-lookup"><span data-stu-id="f02ab-112">However, it should not apply to the `Uninstall-Package` case.</span></span>

<span data-ttu-id="f02ab-113">**Soluzione**: rimozione completa dell'alias `-Version` in PackageManagement (noto anche come</span><span class="sxs-lookup"><span data-stu-id="f02ab-113">**Solution**:removed `-Version` alias entirely in PackageManagement (a.k.a.</span></span> <span data-ttu-id="f02ab-114">OneGet) e PowerShellGet.</span><span class="sxs-lookup"><span data-stu-id="f02ab-114">OneGet) and PowerShellGet.</span></span>

### <a name="multiple-prompts-for-bootstrapping-the-nuget-provider"></a><span data-ttu-id="f02ab-115">Più richieste per l'avvio del provider NuGet</span><span class="sxs-lookup"><span data-stu-id="f02ab-115">Multiple prompts for bootstrapping the NuGet provider</span></span>

<span data-ttu-id="f02ab-116">**Scenario**: Quando si esegue `Find-Module` o `Install-Module` o altri cmdlet PackageManagement nel computer in uso per la prima volta, PackageManagement tenta di avviare il provider NuGet.</span><span class="sxs-lookup"><span data-stu-id="f02ab-116">**Scenario**: When you run `Find-Module` or `Install-Module` or other PackageManagement cmdlets on your computer for the first time, PackageManagement tries to bootstrap the NuGet provider.</span></span> <span data-ttu-id="f02ab-117">Ciò avviene perché il provider PowerShellGet usa anche il provider NuGet per scaricare i moduli di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f02ab-117">It does this because the PowerShellGet provider also uses the NuGet provider to download PowerShell modules.</span></span> <span data-ttu-id="f02ab-118">PackageManagement quindi chiede all'utente l'autorizzazione per installare il provider NuGet.</span><span class="sxs-lookup"><span data-stu-id="f02ab-118">PackageManagement then prompts the user for permission to install the NuGet provider.</span></span> <span data-ttu-id="f02ab-119">Dopo che l'utente seleziona "Sì" per l'avvio, verrà installata la versione più recente del provider NuGet.</span><span class="sxs-lookup"><span data-stu-id="f02ab-119">After the user selects "yes" for the bootstrapping, the latest version of the NuGet provider will be installed.</span></span>

<span data-ttu-id="f02ab-120">Se tuttavia si dispone di una versione precedente del provider NuGet installata nel computer in uso, in alcuni casi viene caricata per prima la versione precedente di NuGet nella sessione di PowerShell. Si tratta della race condition di PackageManagement.</span><span class="sxs-lookup"><span data-stu-id="f02ab-120">However, in some cases, when you have an old version of NuGet provider installed on your computer, the older version of NuGet sometimes gets loaded first into the PowerShell session (that's the race condition in PackageManagement).</span></span> <span data-ttu-id="f02ab-121">PowerShellGet richiede tuttavia la versione più recente del provider NuGet, pertanto PowerShellGet chiede a PackageManagement di avviare nuovamente il provider NuGet.</span><span class="sxs-lookup"><span data-stu-id="f02ab-121">However PowerShellGet requires the later version of the NuGet provider to work, so PowerShellGet asks PackageManagement to bootstrap the NuGet provider again.</span></span> <span data-ttu-id="f02ab-122">Ciò comporta l'esecuzione di più richieste di avvio del provider NuGet.</span><span class="sxs-lookup"><span data-stu-id="f02ab-122">This results in multiple prompts for bootstrapping the NuGet provider.</span></span>

<span data-ttu-id="f02ab-123">**Soluzione**: In WMF 5.1, PackageManagement carica la versione più recente del provider NuGet per evitare l'esecuzione di più richieste di avvio del provider NuGet.</span><span class="sxs-lookup"><span data-stu-id="f02ab-123">**Solution**: In WMF5.1, PackageManagement loads the latest version of the NuGet provider to avoid multiple prompts for bootstrapping the NuGet provider.</span></span>

<span data-ttu-id="f02ab-124">È possibile aggirare il problema anche eliminando manualmente la versione precedente del provider NuGet (NuGet-Anycpu.exe), se presente, da $env:Programmi\PackageManagement\ProviderAssemblies $env:LOCALAPPDATA\PackageManagement\ProviderAssemblies</span><span class="sxs-lookup"><span data-stu-id="f02ab-124">You could also work around this issue by manually deleting the old version of the NuGet provider (NuGet-Anycpu.exe) if exists from $env:ProgramFiles\PackageManagement\ProviderAssemblies $env:LOCALAPPDATA\PackageManagement\ProviderAssemblies</span></span>


### <a name="support-for-packagemanagement-on-computers-with-intranet-access-only"></a><span data-ttu-id="f02ab-125">Supporto per PackageManagement nei computer solo con accesso Intranet</span><span class="sxs-lookup"><span data-stu-id="f02ab-125">Support for PackageManagement on computers with Intranet access only</span></span>

<span data-ttu-id="f02ab-126">**Scenario**: In uno scenario aziendale gli utenti operano in un ambiente in cui non è presente alcun accesso Internet, ma solo Intranet.</span><span class="sxs-lookup"><span data-stu-id="f02ab-126">**Scenario**: For the enterprise scenario, people are working under an environment where there is no Internet access but Intranet only.</span></span> <span data-ttu-id="f02ab-127">In WMF 5.0, PackageManagement non supporta questo caso.</span><span class="sxs-lookup"><span data-stu-id="f02ab-127">PackageManagement did not support this case in WMF 5.0.</span></span>

<span data-ttu-id="f02ab-128">**Scenario**: In WMF 5.0, PackageManagement non supporta i computer che dispongono solo dell'accesso Intranet, ma non Internet.</span><span class="sxs-lookup"><span data-stu-id="f02ab-128">**Scenario**: In WMF 5.0, PackageManagement did not support computers that have only Intranet (but not Internet) access.</span></span>

<span data-ttu-id="f02ab-129">**Soluzione**: In WMF 5.1 è possibile seguire questa procedura per consentire ai computer Intranet di usare PackageManagement:</span><span class="sxs-lookup"><span data-stu-id="f02ab-129">**Solution**: In WMF 5.1, you can follow these steps to allow Intranet computers to use PackageManagement:</span></span>

1. <span data-ttu-id="f02ab-130">Scaricare il provider NuGet usando un altro computer che dispone di una connessione Internet tramite `Install-PackageProvider -Name NuGet`.</span><span class="sxs-lookup"><span data-stu-id="f02ab-130">Download the NuGet provider using another computer that has an Internet connection by using `Install-PackageProvider -Name NuGet`.</span></span>

2. <span data-ttu-id="f02ab-131">Trovare il provider NuGet sotto `$env:ProgramFiles\PackageManagement\ProviderAssemblies\nuget`  o  `$env:LOCALAPPDATA\PackageManagement\ProviderAssemblies\nuget`.</span><span class="sxs-lookup"><span data-stu-id="f02ab-131">Find the NuGet provider under either `$env:ProgramFiles\PackageManagement\ProviderAssemblies\nuget`  or  `$env:LOCALAPPDATA\PackageManagement\ProviderAssemblies\nuget`.</span></span>

3. <span data-ttu-id="f02ab-132">Copiare i file binari in una cartella o in una condivisione di rete a cui il computer Intranet può accedere e quindi installare il provider NuGet con `Install-PackageProvider -Name NuGet -Source <Path to folder>`.</span><span class="sxs-lookup"><span data-stu-id="f02ab-132">Copy the binaries to a folder or network share location that the Intranet computer can access, and then install the NuGet provider with `Install-PackageProvider -Name NuGet -Source <Path to folder>`.</span></span>


### <a name="event-logging-improvements"></a><span data-ttu-id="f02ab-133">Miglioramenti apportati alla registrazione di eventi</span><span class="sxs-lookup"><span data-stu-id="f02ab-133">Event logging improvements</span></span>

<span data-ttu-id="f02ab-134">Quando si installano i pacchetti, si modifica lo stato del computer.</span><span class="sxs-lookup"><span data-stu-id="f02ab-134">When you install packages, you are changing the state of the computer.</span></span> <span data-ttu-id="f02ab-135">In WMF 5.1, PackageManagement ora registra gli eventi nel registro eventi di Windows per le attività `Install-Package`, `Uninstall-Package` e `Save-Package`.</span><span class="sxs-lookup"><span data-stu-id="f02ab-135">In WMF 5.1, PackageManagement now logs events to the Windows event log for `Install-Package`, `Uninstall-Package`, and `Save-Package` activities.</span></span> <span data-ttu-id="f02ab-136">Il registro eventi è identico a quello di PowerShell, vale a dire `Microsoft-Windows-PowerShell, Operational`.</span><span class="sxs-lookup"><span data-stu-id="f02ab-136">The Event log  is the same as for PowerShell, that is, `Microsoft-Windows-PowerShell, Operational`.</span></span>

### <a name="support-for-basic-authentication"></a><span data-ttu-id="f02ab-137">Supporto per l'autenticazione di base</span><span class="sxs-lookup"><span data-stu-id="f02ab-137">Support for basic authentication</span></span>

<span data-ttu-id="f02ab-138">In WMF 5.1, PackageManagement supporta la ricerca e l'installazione dei pacchetti da un repository che richiede l'autenticazione di base.</span><span class="sxs-lookup"><span data-stu-id="f02ab-138">In WMF 5.1, PackageManagement supports finding and installing packages from a repository that requires basic authentication.</span></span> <span data-ttu-id="f02ab-139">È possibile fornire le credenziali per i cmdlet `Find-Package` e `Install-Package`.</span><span class="sxs-lookup"><span data-stu-id="f02ab-139">You can supply your credentials to the `Find-Package` and `Install-Package` cmdlets.</span></span> <span data-ttu-id="f02ab-140">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="f02ab-140">For example:</span></span>

``` PowerShell
Find-Package -Source <SourceWithCredential> -Credential (Get-Credential)
```

### <a name="support-for-using-packagemanagement-behind-a-proxy"></a><span data-ttu-id="f02ab-141">Supporto per l'utilizzo di PackageManagement dietro un proxy</span><span class="sxs-lookup"><span data-stu-id="f02ab-141">Support for using PackageManagement behind a proxy</span></span>

<span data-ttu-id="f02ab-142">In WMF 5.1, PackageManagement accetta ora i nuovi parametri proxy `-ProxyCredential` e `-Proxy`.</span><span class="sxs-lookup"><span data-stu-id="f02ab-142">In WMF 5.1, PackageManagement now takes new proxy parameters `-ProxyCredential` and `-Proxy`.</span></span> <span data-ttu-id="f02ab-143">Grazie a questi parametri è possibile specificare le credenziali e l'URL del proxy nei cmdlet di PackageManagement.</span><span class="sxs-lookup"><span data-stu-id="f02ab-143">Using these parameters, you can specify the proxy URL and credentials to PackageManagement cmdlets.</span></span> <span data-ttu-id="f02ab-144">Per impostazione predefinita, vengono usate le impostazioni proxy del sistema.</span><span class="sxs-lookup"><span data-stu-id="f02ab-144">By default, system proxy settings are used.</span></span> <span data-ttu-id="f02ab-145">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="f02ab-145">For example:</span></span>

``` PowerShell
Find-Package -Source http://www.nuget.org/api/v2/ -Proxy http://www.myproxyserver.com -ProxyCredential (Get-Credential)
```
