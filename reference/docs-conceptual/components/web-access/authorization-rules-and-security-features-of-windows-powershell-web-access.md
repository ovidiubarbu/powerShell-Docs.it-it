---
ms.date: 06/27/2017
keywords: powershell,cmdlet
title: Regole di autorizzazione e funzionalità di sicurezza di Accesso Web Windows PowerShell
ms.openlocfilehash: ee25df052994e47e559daa87b89af813471d896b
ms.sourcegitcommit: 6545c60578f7745be015111052fd7769f8289296
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 04/22/2020
ms.locfileid: "81624755"
---
# <a name="authorization-rules-and-security-features-of-windows-powershell-web-access"></a><span data-ttu-id="e7a72-103">Regole di autorizzazione e funzionalità di sicurezza di Accesso Web Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="e7a72-103">Authorization Rules and Security Features of Windows PowerShell Web Access</span></span>

<span data-ttu-id="e7a72-104">Aggiornamento: 24 giugno 2013</span><span class="sxs-lookup"><span data-stu-id="e7a72-104">Updated: June 24, 2013</span></span>

<span data-ttu-id="e7a72-105">Si applica a: Windows Server 2012 R2, Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="e7a72-105">Applies To: Windows Server 2012 R2, Windows Server 2012</span></span>

<span data-ttu-id="e7a72-106">Accesso Web di Windows PowerShell in Windows Server 2012 R2 e Windows Server 2012 prevede un modello di sicurezza restrittivo.</span><span class="sxs-lookup"><span data-stu-id="e7a72-106">Windows PowerShell Web Access in Windows Server 2012 R2 and Windows Server 2012 has a restrictive security model.</span></span> <span data-ttu-id="e7a72-107">È necessario che agli utenti venga concesso l'accesso in modo esplicito prima che possano accedere al gateway Accesso Web Windows PowerShell e usare la console di Windows PowerShell basata sul Web.</span><span class="sxs-lookup"><span data-stu-id="e7a72-107">Users must explicitly be granted access before they can sign in to the Windows PowerShell Web Access gateway and use the web-based Windows PowerShell console.</span></span>

## <a name="configuring-authorization-rules-and-site-security"></a><span data-ttu-id="e7a72-108">Configurazione delle regole di autorizzazione e della sicurezza del sito</span><span class="sxs-lookup"><span data-stu-id="e7a72-108">Configuring authorization rules and site security</span></span>

<span data-ttu-id="e7a72-109">Dopo che Accesso Web Windows PowerShell è stato installato e il gateway è stato configurato, gli utenti possono aprire la pagina di accesso in un browser, ma non possono accedere finché l'amministratore di Accesso Web Windows PowerShell non concede esplicitamente l'accesso.</span><span class="sxs-lookup"><span data-stu-id="e7a72-109">After Windows PowerShell Web Access is installed and the gateway is configured, users can open the sign-in page in a browser, but they cannot sign in until the Windows PowerShell Web Access administrator grants users access explicitly.</span></span> <span data-ttu-id="e7a72-110">Il controllo di accesso di Accesso Web Windows PowerShell viene gestito con il set di cmdlet di Windows PowerShell descritto nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="e7a72-110">'Windows PowerShell Web Access' access control is managed by using the set of Windows PowerShell cmdlets described in the following table.</span></span> <span data-ttu-id="e7a72-111">Non esiste un'interfaccia grafica paragonabile per aggiungere o gestire le regole di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="e7a72-111">There is no comparable GUI for adding or managing authorization rules.</span></span>
<span data-ttu-id="e7a72-112">Vedere [Windows PowerShell Web Access Cmdlets](/powershell/module/powershellwebaccess/?view=winserver2012r2-ps) (Cmdlet di Accesso Web Windows PowerShell).</span><span class="sxs-lookup"><span data-stu-id="e7a72-112">See [Windows PowerShell Web Access Cmdlets](/powershell/module/powershellwebaccess/?view=winserver2012r2-ps).</span></span>

<span data-ttu-id="e7a72-113">Gli amministratori possono definire `{0-n}` regole di autenticazione per Accesso Web Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e7a72-113">Administrators can define `{0-n}` authentication rules for Windows PowerShell Web Access.</span></span> <span data-ttu-id="e7a72-114">Poiché la sicurezza predefinita è di tipo restrittivo, l'assenza di regole di autenticazione implica che nessun utente può accedere ad alcun elemento.</span><span class="sxs-lookup"><span data-stu-id="e7a72-114">The default security is restrictive rather than permissive; zero authentication rules means no users have access to anything.</span></span>

<span data-ttu-id="e7a72-115">I cmdlet [Add-PswaAuthorizationRule](/powershell/module/powershellwebaccess/add-pswaauthorizationrule?view=winserver2012r2-ps) e [Test-PswaAuthorizationRule](/powershell/module/powershellwebaccess/test-pswaauthorizationrule?view=winserver2012r2-ps) in Windows Server 2012 R2 includono ora un parametro Credential che consente di aggiungere e testare le regole di autorizzazione di Accesso Web Windows PowerShell da un computer remoto o in una sessione di Accesso Web Windows PowerShell attiva.</span><span class="sxs-lookup"><span data-stu-id="e7a72-115">[Add-PswaAuthorizationRule](/powershell/module/powershellwebaccess/add-pswaauthorizationrule?view=winserver2012r2-ps) and [Test-PswaAuthorizationRule](/powershell/module/powershellwebaccess/test-pswaauthorizationrule?view=winserver2012r2-ps) in Windows Server 2012 R2 include a Credential parameter that allows you to add and test Windows PowerShell Web Access authorization rules from a remote computer, or from within an active Windows PowerShell Web Access session.</span></span> <span data-ttu-id="e7a72-116">Come con gli altri cmdlet di Windows PowerShell che includono un parametro Credential, è possibile specificare un oggetto PSCredential come valore del parametro.</span><span class="sxs-lookup"><span data-stu-id="e7a72-116">As with other Windows PowerShell cmdlets that have a Credential parameter, you can specify a PSCredential object as the value of the parameter.</span></span> <span data-ttu-id="e7a72-117">Per creare un oggetto PSCredential che contiene le credenziali da passare a un computer remoto, eseguire il cmdlet [Get-Credential](/powershell/module/microsoft.powershell.security/Get-Credential).</span><span class="sxs-lookup"><span data-stu-id="e7a72-117">To create a PSCredential object that contains credentials you want to pass to a remote computer, run the [Get-Credential](/powershell/module/microsoft.powershell.security/Get-Credential) cmdlet.</span></span>

<span data-ttu-id="e7a72-118">Le regole di autenticazione Accesso Web Windows PowerShell sono costituite da elenchi di operazioni consentite.</span><span class="sxs-lookup"><span data-stu-id="e7a72-118">Windows PowerShell Web Access authentication rules are whitelist rules.</span></span> <span data-ttu-id="e7a72-119">Ogni regola definisce una connessione consentita fra utenti, computer di destinazione e specifiche [configurazioni di sessione](/powershell/module/microsoft.powershell.core/about/about_session_configurations?view=powershell-5.1) di Windows PowerShell, denominate anche endpoint o _spazi di esecuzione_, nei computer di destinazione specificati.</span><span class="sxs-lookup"><span data-stu-id="e7a72-119">Each rule is a definition of an allowed connection between users, target computers, and particular Windows PowerShell [session configurations](/powershell/module/microsoft.powershell.core/about/about_session_configurations?view=powershell-5.1) (also referred to as endpoints or _runspaces_) on specified target computers.</span></span>
<span data-ttu-id="e7a72-120">Per una spiegazione degli **spazi di esecuzione** vedere [Uso iniziale degli spazi di esecuzione di PowerShell](https://blogs.technet.microsoft.com/heyscriptingguy/2015/11/26/beginning-use-of-powershell-runspaces-part-1/)</span><span class="sxs-lookup"><span data-stu-id="e7a72-120">For an explanation on **runspaces** see [Beginning Use of PowerShell Runspaces](https://blogs.technet.microsoft.com/heyscriptingguy/2015/11/26/beginning-use-of-powershell-runspaces-part-1/)</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e7a72-121">Affinché un utente possa ottenere l'accesso, è sufficiente che una sola regola risulti vera.</span><span class="sxs-lookup"><span data-stu-id="e7a72-121">A user needs only one rule to be true to get access.</span></span> <span data-ttu-id="e7a72-122">Se dalla console basata sul Web si consente a un utente di accedere a un computer, con accesso al linguaggio completo o solo ai cmdlet di Windows PowerShell per la gestione remota, tale utente potrà accedere (o passare) ad altri computer connessi al primo computer di destinazione.</span><span class="sxs-lookup"><span data-stu-id="e7a72-122">If a user is given access to one computer with either full language access or access only to Windows PowerShell remote management cmdlets, from the web-based console, the user can log on (or hop) to other computers that are connected to the first target computer.</span></span> <span data-ttu-id="e7a72-123">Il modo più sicuro per configurare Accesso Web Windows PowerShell consiste nel limitare l'accesso degli utenti alle sole configurazioni di sessione vincolate che consentono di eseguire specifiche attività che devono essere in genere eseguite in modalità remota.</span><span class="sxs-lookup"><span data-stu-id="e7a72-123">The most secure way to configure Windows PowerShell Web Access is to allow users access only to constrained session configurations that allow them to accomplish specific tasks that they normally need to perform remotely.</span></span>

<span data-ttu-id="e7a72-124">I cmdlet illustrati in [Windows PowerShell Web Access Cmdlets](/powershell/module/powershellwebaccess/?view=winserver2012r2-ps) (Cmdlet di Accesso Web Windows PowerShell) consentono di creare un set di regole di accesso, che viene usato per autorizzare un utente nel gateway di Accesso Web Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e7a72-124">The cmdlets referenced in [Windows PowerShell Web Access Cmdlets](/powershell/module/powershellwebaccess/?view=winserver2012r2-ps) allow to create a set of access rules which are used to authorize a user on the Windows PowerShell Web Access gateway.</span></span> <span data-ttu-id="e7a72-125">Le regole sono diverse dagli elenchi di controllo di accesso (ACL) nei computer di destinazione e forniscono un livello di sicurezza aggiuntivo per l'accesso Web.</span><span class="sxs-lookup"><span data-stu-id="e7a72-125">The rules are different from the access control lists (ACLs) on the destination computer, and provide an additional layer of security for web access.</span></span> <span data-ttu-id="e7a72-126">Ulteriori informazioni sulla sicurezza verranno fornite nelle sezioni successive.</span><span class="sxs-lookup"><span data-stu-id="e7a72-126">More details about security are described in the following section.</span></span>

<span data-ttu-id="e7a72-127">Se un utente non supera tali livelli di sicurezza, riceve un messaggio di "accesso negato" nella finestra del browser.</span><span class="sxs-lookup"><span data-stu-id="e7a72-127">If users cannot pass any of the preceding security layers, they receive a generic 'access denied' message in their browser windows.</span></span> <span data-ttu-id="e7a72-128">Anche se i dettagli relativi alla sicurezza vengono registrati nel server gateway, agli utenti finali non viene comunicato il numero dei livelli di sicurezza superati o il livello a cui si è verificato l'errore di accesso o autenticazione.</span><span class="sxs-lookup"><span data-stu-id="e7a72-128">Although security details are logged on the gateway server, end users are not shown information about how many security layers they passed, or at which layer the sign-in or authentication failure occurred.</span></span>

<span data-ttu-id="e7a72-129">Per altre informazioni sulla configurazione delle regole di autorizzazione, vedere la sezione [Configurazione delle regole di autorizzazione](#configuring-authorization-rules-and-site-security) in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="e7a72-129">For more information about configuring authorization rules, see [configuring authorization rules](#configuring-authorization-rules-and-site-security) in this topic.</span></span>

### <a name="security"></a><span data-ttu-id="e7a72-130">Sicurezza</span><span class="sxs-lookup"><span data-stu-id="e7a72-130">Security</span></span>

<span data-ttu-id="e7a72-131">Il modello di sicurezza di Accesso Web Windows PowerShell prevede quattro livelli fra l'utente finale della console basata sul Web e un computer di destinazione.</span><span class="sxs-lookup"><span data-stu-id="e7a72-131">The Windows PowerShell Web Access security model has four layers between an end user of the web-based console, and a target computer.</span></span> <span data-ttu-id="e7a72-132">Gli amministratori di Accesso Web Windows PowerShell possono aggiungere ulteriori livelli di sicurezza eseguendo alcune operazioni di configurazione nella console Gestione IIS.</span><span class="sxs-lookup"><span data-stu-id="e7a72-132">Windows PowerShell Web Access administrators can add security layers through additional configuration in the IIS Manager console.</span></span> <span data-ttu-id="e7a72-133">Per altre informazioni sulla protezione dei siti Web nella console Gestione IIS, vedere [Configurare la sicurezza del server Web (IIS7)](https://technet.microsoft.com/library/cc731278).</span><span class="sxs-lookup"><span data-stu-id="e7a72-133">For more information about securing websites in the IIS Manager console, see [Configure Web Server Security (IIS7)](https://technet.microsoft.com/library/cc731278).</span></span>

<span data-ttu-id="e7a72-134">Per altre informazioni sulle procedure consigliate per IIS e su come prevenire gli attacchi DoS (Denial of Service), vedere le [procedure consigliate per la prevenzione degli attacchi DoS (Denial of Service)](https://technet.microsoft.com/library/cc750213).</span><span class="sxs-lookup"><span data-stu-id="e7a72-134">For more information about IIS best practices and preventing denial-of-service attacks, see [Best Practices for Preventing DoS/Denial of Service Attacks](https://technet.microsoft.com/library/cc750213).</span></span>
<span data-ttu-id="e7a72-135">L'amministratore può anche acquistare e installare un prodotto di autenticazione commerciale.</span><span class="sxs-lookup"><span data-stu-id="e7a72-135">An administrator can also buy and install additional retail authentication software.</span></span>

<span data-ttu-id="e7a72-136">I quattro livelli di sicurezza fra l'utente finale e il computer di destinazione sono illustrati nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="e7a72-136">The following table describes the four layers of security between end users and target computers.</span></span>

|<span data-ttu-id="e7a72-137">Level</span><span class="sxs-lookup"><span data-stu-id="e7a72-137">Level</span></span>|<span data-ttu-id="e7a72-138">Livello</span><span class="sxs-lookup"><span data-stu-id="e7a72-138">Layer</span></span>|
|-|-|
|<span data-ttu-id="e7a72-139">1</span><span class="sxs-lookup"><span data-stu-id="e7a72-139">1</span></span>|[<span data-ttu-id="e7a72-140">funzionalità per la sicurezza del server Web IIS</span><span class="sxs-lookup"><span data-stu-id="e7a72-140">iis web server security features</span></span>](#iis-web-server-security-features)|
|<span data-ttu-id="e7a72-141">2</span><span class="sxs-lookup"><span data-stu-id="e7a72-141">2</span></span>|[<span data-ttu-id="e7a72-142">autenticazione del gateway basata su moduli di Accesso Web Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="e7a72-142">windows powershell web access forms-based gateway authentication</span></span>](#windows-powershell-web-access-forms-based-gateway-authentication)|
|<span data-ttu-id="e7a72-143">3</span><span class="sxs-lookup"><span data-stu-id="e7a72-143">3</span></span>|[<span data-ttu-id="e7a72-144">regole di autorizzazione di Accesso Web Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="e7a72-144">windows powershell web access authorization rules</span></span>](#windows-powershell-web-access-authorization-rules)|
|<span data-ttu-id="e7a72-145">4</span><span class="sxs-lookup"><span data-stu-id="e7a72-145">4</span></span>|[<span data-ttu-id="e7a72-146">regole di autenticazione e autorizzazione del computer di destinazione</span><span class="sxs-lookup"><span data-stu-id="e7a72-146">target authentication and authorization rules</span></span>](#target-authentication-and-authorization-rules)|

<span data-ttu-id="e7a72-147">Informazioni dettagliate su ogni livello sono disponibili nelle sezioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="e7a72-147">Detailed information about each layer can be found under the following headings:</span></span>

#### <a name="iis-web-server-security-features"></a><span data-ttu-id="e7a72-148">Funzionalità per la sicurezza del server Web IIS</span><span class="sxs-lookup"><span data-stu-id="e7a72-148">IIS Web Server security features</span></span>

<span data-ttu-id="e7a72-149">Gli utenti di Accesso Web Windows PowerShell devono sempre fornire nome utente e password per autenticare l'account nel gateway.</span><span class="sxs-lookup"><span data-stu-id="e7a72-149">Windows PowerShell Web Access users must always provide a user name and password to authenticate their accounts on the gateway.</span></span> <span data-ttu-id="e7a72-150">Gli amministratori di Accesso Web Windows PowerShell possono tuttavia decidere di attivare o disattivare l'autenticazione del certificato client (vedere [Installare e usare Accesso Web Windows PowerShell](install-and-use-windows-powershell-web-access.md)) per testare un certificato e, successivamente, configurare un certificato originale.</span><span class="sxs-lookup"><span data-stu-id="e7a72-150">However, Windows PowerShell Web Access administrators can also turn optional client certificate authentication on or off, see [install and use windows powershell web access](install-and-use-windows-powershell-web-access.md) to enable a test certificate and, later, how to configure a genuine certificate).</span></span>

<span data-ttu-id="e7a72-151">La funzionalità facoltativa per i certificati client richiede che, oltre al nome utente e alla password, gli utenti forniscano anche un certificato client valido, nell'ambito della configurazione del server Web (IIS).</span><span class="sxs-lookup"><span data-stu-id="e7a72-151">The optional client certificate feature requires end users to have a valid client certificate, in addition to their user names and passwords, and is part of Web Server (IIS) configuration.</span></span> <span data-ttu-id="e7a72-152">Se il livello relativo al certificato client è abilitato, la pagina di accesso di Accesso Web Windows PowerShell richiede agli utenti di fornire un certificato valido prima di valutare le relative credenziali.</span><span class="sxs-lookup"><span data-stu-id="e7a72-152">When the client certificate layer is enabled, the Windows PowerShell Web Access sign-in page prompts users to provide valid certificates before their sign-in credentials are evaluated.</span></span> <span data-ttu-id="e7a72-153">L'autenticazione tramite certificati client controlla automaticamente il certificato client.</span><span class="sxs-lookup"><span data-stu-id="e7a72-153">Client certificate authentication automatically checks for the client certificate.</span></span> <span data-ttu-id="e7a72-154">Se non viene trovato un certificato valido, Accesso Web Windows PowerShell informa l'utente in modo che possa fornirne uno.</span><span class="sxs-lookup"><span data-stu-id="e7a72-154">If a valid certificate is not found, Windows PowerShell Web Access informs users, so they can provide the certificate.</span></span> <span data-ttu-id="e7a72-155">Se viene trovato un certificato valido, Accesso Web Windows PowerShell apre la pagina di accesso per consentire agli utenti di immettere nome utente e password.</span><span class="sxs-lookup"><span data-stu-id="e7a72-155">If a valid client certificate is found, Windows PowerShell Web Access opens the sign-in page for users to provide their user names and passwords.</span></span>

<span data-ttu-id="e7a72-156">Questo è un esempio delle impostazioni di sicurezza aggiuntive offerte dal server Web IIS.</span><span class="sxs-lookup"><span data-stu-id="e7a72-156">This is one example of additional security settings that are offered by IIS Web Server.</span></span> <span data-ttu-id="e7a72-157">Per informazioni sulle altre funzionalità di sicurezza di IIS, vedere [Configurare la sicurezza del server Web (IIS 7)](https://technet.microsoft.com/library/cc731278).</span><span class="sxs-lookup"><span data-stu-id="e7a72-157">For more information about other IIS security features, see [Configure Web Server Security (IIS 7)](https://technet.microsoft.com/library/cc731278).</span></span>

#### <a name="windows-powershell-web-access-forms-based-gateway-authentication"></a><span data-ttu-id="e7a72-158">Autenticazione del gateway basata su moduli di Accesso Web Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="e7a72-158">Windows PowerShell Web Access forms-based gateway authentication</span></span>

<span data-ttu-id="e7a72-159">La pagina di accesso di Accesso Web Windows PowerShell richiede un set di credenziali (nome utente e password) e offre agli utenti la possibilità di specificare credenziali diverse per il computer di destinazione.</span><span class="sxs-lookup"><span data-stu-id="e7a72-159">The Windows PowerShell Web Access sign-in page requires a set of credentials (user name and password) and offers users the option of providing different credentials for the target computer.</span></span>
<span data-ttu-id="e7a72-160">Se l'utente non fornisce altre credenziali, per la connessione al computer di destinazione vengono utilizzati il nome utente e la password principali specificati per la connessione al gateway.</span><span class="sxs-lookup"><span data-stu-id="e7a72-160">If the user does not provide alternate credentials, the primary user name and password that are used to connect to the gateway are also used to connect to the target computer.</span></span>

<span data-ttu-id="e7a72-161">Le credenziali richieste vengono autenticate nel gateway di Accesso Web Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="e7a72-161">The required credentials are authenticated on the Windows PowerShell Web Access gateway.</span></span> <span data-ttu-id="e7a72-162">e devono corrispondere ad account utente validi nel server gateway locale di Accesso Web Windows PowerShell o in Active Directory®.</span><span class="sxs-lookup"><span data-stu-id="e7a72-162">These credentials must be valid user accounts on either the local Windows PowerShell Web Access gateway server, or in Active Directory.</span></span>

#### <a name="windows-powershell-web-access-authorization-rules"></a><span data-ttu-id="e7a72-163">Regole di autorizzazione di Accesso Web Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="e7a72-163">Windows PowerShell Web Access authorization rules</span></span>

<span data-ttu-id="e7a72-164">Dopo l'autenticazione dell'utente nel gateway, Accesso Web Windows PowerShell controlla le regole di autorizzazione per verificare se l'utente ha accesso al computer di destinazione richiesto.</span><span class="sxs-lookup"><span data-stu-id="e7a72-164">After a user is authenticated at the gateway, Windows PowerShell Web Access checks authorization rules to verify if the user has access to the requested target computer.</span></span> <span data-ttu-id="e7a72-165">Se l'autorizzazione ha esito positivo, le credenziali dell'utente vengono passate al computer di destinazione.</span><span class="sxs-lookup"><span data-stu-id="e7a72-165">After successful authorization, the user's credentials are passed along to the target computer.</span></span>

<span data-ttu-id="e7a72-166">Tali regole vengono valutate solo dopo l'autenticazione dell'utente nel gateway e prima dell'autenticazione nel computer di destinazione.</span><span class="sxs-lookup"><span data-stu-id="e7a72-166">These rules are evaluated only after a user has been authenticated by the gateway, and before a user can be authenticated on a target computer.</span></span>

#### <a name="target-authentication-and-authorization-rules"></a><span data-ttu-id="e7a72-167">Autenticazione e regole di autorizzazione del computer di destinazione</span><span class="sxs-lookup"><span data-stu-id="e7a72-167">Target authentication and authorization rules</span></span>

<span data-ttu-id="e7a72-168">L'ultimo livello di sicurezza di Accesso Web Windows PowerShell è costituito dalla configurazione di protezione del computer di destinazione.</span><span class="sxs-lookup"><span data-stu-id="e7a72-168">The final layer of security for Windows PowerShell Web Access is the target computer's own security configuration.</span></span> <span data-ttu-id="e7a72-169">Gli utenti devono avere i diritti di accesso appropriati, configurati sia nel computer di destinazione che nelle regole di autorizzazione di Accesso Web Windows PowerShell, per eseguire una console Windows PowerShell basata sul Web che può operare sul computer di destinazione con Accesso Web Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e7a72-169">Users must have the appropriate access rights configured on the target computer, and also in the Windows PowerShell Web Access authorization rules, to run a Windows PowerShell web-based console that affects a target computer through Windows PowerShell Web Access.</span></span>

<span data-ttu-id="e7a72-170">Questo livello offre un meccanismo di sicurezza uguale a quello che valuta i tentativi di connessione quando un utente crea una sessione remota di Windows PowerShell per un computer di destinazione direttamente da Windows PowerShell, eseguendo il cmdlet [Enter-PSSession](/powershell/module/microsoft.powershell.core/Enter-PSSession) o [New-PSSession](/powershell/module/microsoft.powershell.core/new-pssession).</span><span class="sxs-lookup"><span data-stu-id="e7a72-170">This layer offers the same security mechanisms that would evaluate connection attempts if users tried to create a remote Windows PowerShell session to a target computer from within Windows PowerShell by running the [Enter-PSSession](/powershell/module/microsoft.powershell.core/Enter-PSSession) or [New-PSSession](/powershell/module/microsoft.powershell.core/new-pssession) cmdlets.</span></span>

<span data-ttu-id="e7a72-171">Per impostazione predefinita, Accesso Web Windows PowerShell usa il nome utente e la password principali per eseguire l'autenticazione sia nel gateway che nel computer di destinazione.</span><span class="sxs-lookup"><span data-stu-id="e7a72-171">By default, Windows PowerShell Web Access uses the primary user name and password for authentication on both the gateway and the target computer.</span></span> <span data-ttu-id="e7a72-172">La sezione **Impostazioni di connessione facoltative** della pagina Web di accesso offre agli utenti la possibilità di specificare credenziali diverse per il computer di destinazione, se sono necessarie.</span><span class="sxs-lookup"><span data-stu-id="e7a72-172">The web-based sign-in page, in a section titled **Optional connection settings**, offers users the option of providing different credentials for the target computer, if they are required.</span></span> <span data-ttu-id="e7a72-173">Se l'utente non fornisce altre credenziali, per la connessione al computer di destinazione vengono utilizzati il nome utente e la password principali specificati per la connessione al gateway.</span><span class="sxs-lookup"><span data-stu-id="e7a72-173">If the user does not provide alternate credentials, the primary user name and password that are used to connect to the gateway are also used to connect to the target computer.</span></span>

<span data-ttu-id="e7a72-174">Le regole di autorizzazione possono essere utilizzate per consentire agli utenti di accedere a una configurazione di sessione specifica.</span><span class="sxs-lookup"><span data-stu-id="e7a72-174">Authorization rules can be used to allow users access to a particular session configuration.</span></span> <span data-ttu-id="e7a72-175">È possibile creare configurazioni di sessione o _spazi di esecuzione con restrizioni_ per Accesso Web Windows PowerShell e consentire a utenti specifici di connettersi solo a configurazioni di sessione specifiche, quando accedono ad Accesso Web Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e7a72-175">You can create _restricted runspaces_ or session configurations for Windows PowerShell Web Access, and allow specific users to connect only to specific session configurations when they sign in to Windows PowerShell Web Access.</span></span> <span data-ttu-id="e7a72-176">È possibile utilizzare gli elenchi di controllo di accesso (ACL) per identificare gli utenti che hanno accesso a endpoint specifici e limitare ulteriormente l'accesso all'endpoint per un gruppo di utenti specifico, utilizzando le regole di autorizzazione descritte in questa sezione.</span><span class="sxs-lookup"><span data-stu-id="e7a72-176">You can use access control lists (ACLs) to determine which users have access to specific endpoints, and further restrict access to the endpoint for a specific set of users by using authorization rules described in this section.</span></span> <span data-ttu-id="e7a72-177">Per altre informazioni sugli spazi di esecuzione con restrizioni, vedere [Creating a constrained runspace](/powershell/scripting/developer/hosting/creating-a-constrained-runspace) (Creazione di uno spazio di esecuzione con restrizioni).</span><span class="sxs-lookup"><span data-stu-id="e7a72-177">For more information about restricted runspaces, see [Creating a constrained runspace](/powershell/scripting/developer/hosting/creating-a-constrained-runspace).</span></span>

### <a name="configuring-authorization-rules"></a><span data-ttu-id="e7a72-178">Configurazione delle regole di autorizzazione</span><span class="sxs-lookup"><span data-stu-id="e7a72-178">Configuring authorization rules</span></span>

<span data-ttu-id="e7a72-179">In genere gli amministratori vogliono applicare agli utenti di Accesso Web Windows PowerShell le stesse regole di autorizzazione già definite nell'ambiente per la gestione remota di Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e7a72-179">Administrators likely want the same authorization rule for Windows PowerShell Web Access users that is already defined in their environment for Windows PowerShell remote management.</span></span> <span data-ttu-id="e7a72-180">La prima procedura di questa sezione illustra come aggiungere una regola di autorizzazione sicura che consente l'accesso a un singolo utente per la gestione di un singolo computer con una singola configurazione di sessione.</span><span class="sxs-lookup"><span data-stu-id="e7a72-180">The first procedure in this section describes how to add a secure authorization rule that grants access to one user, signing in to manage one computer, and within a single session configuration.</span></span> <span data-ttu-id="e7a72-181">La seconda procedura illustra come rimuovere una regola di autorizzazione non più necessaria.</span><span class="sxs-lookup"><span data-stu-id="e7a72-181">The second procedure describes how to remove an authorization rule that is no longer needed.</span></span>

<span data-ttu-id="e7a72-182">Se si prevede di usare configurazioni di sessione personalizzate per consentire a utenti specifici di lavorare esclusivamente in spazi di esecuzione di Accesso Web Windows PowerShell con restrizioni, creare le configurazioni di sessione personalizzate prima di aggiungere le regole di autorizzazione che vi fanno riferimento.</span><span class="sxs-lookup"><span data-stu-id="e7a72-182">If you plan to use custom session configurations to allow specific users to work only within restricted runspaces in Windows PowerShell Web Access, create your custom session configurations before you add authorization rules that refer to them.</span></span> <span data-ttu-id="e7a72-183">Non è possibile usare i cmdlet di Accesso Web Windows PowerShell per creare configurazioni di sessione personalizzate.</span><span class="sxs-lookup"><span data-stu-id="e7a72-183">You cannot use the Windows PowerShell Web Access cmdlets to create custom session configurations.</span></span> <span data-ttu-id="e7a72-184">Per altre informazioni sulla creazione di configurazioni di sessione personalizzate, vedere [about_Session_Configuration_Files](/powershell/module/microsoft.powershell.core/about/about_session_configuration_files).</span><span class="sxs-lookup"><span data-stu-id="e7a72-184">For more information about creating custom session configurations, see [about_Session_Configuration_Files](/powershell/module/microsoft.powershell.core/about/about_session_configuration_files).</span></span>

<span data-ttu-id="e7a72-185">L'unico carattere jolly supportato dai cmdlet di Accesso Web Windows PowerShell è l'asterisco ( \* ).</span><span class="sxs-lookup"><span data-stu-id="e7a72-185">Windows PowerShell Web Access cmdlets support one wildcard character, an asterisk ( \* ).</span></span> <span data-ttu-id="e7a72-186">I caratteri jolly all'interno delle stringhe non sono supportati. Utilizzare un singolo asterisco per proprietà (utenti, computer o configurazioni di sessione).</span><span class="sxs-lookup"><span data-stu-id="e7a72-186">Wildcard characters within strings are not supported; use a single asterisk per property (users, computers, or session configurations).</span></span>

> [!NOTE]
> <span data-ttu-id="e7a72-187">Per altre modalità di uso della regole di autorizzazione per la concessione dell'accesso agli utenti e la protezione dell'ambiente di Accesso Web Windows PowerShell, vedere [Altri scenari di esempio per le regole di autorizzazione](#other-authorization-rule-scenario-examples) in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="e7a72-187">For more ways you can use authorization rules to grant access to users and help secure the Windows PowerShell Web Access environment, see [other authorization rule scenario examples](#other-authorization-rule-scenario-examples) in this topic.</span></span>

#### <a name="to-add-a-restrictive-authorization-rule"></a><span data-ttu-id="e7a72-188">Per aggiungere una regola di autorizzazione restrittiva</span><span class="sxs-lookup"><span data-stu-id="e7a72-188">To add a restrictive authorization rule</span></span>

1. <span data-ttu-id="e7a72-189">Per aprire una sessione di Windows PowerShell con diritti utente elevati, eseguire una di queste operazioni.</span><span class="sxs-lookup"><span data-stu-id="e7a72-189">Do one of the following to open a Windows PowerShell session with elevated user rights.</span></span>

   - <span data-ttu-id="e7a72-190">Nel desktop di Windows fare clic con il pulsante destro del mouse su **Windows PowerShell** nella barra delle applicazioni e scegliere **Esegui come amministratore**.</span><span class="sxs-lookup"><span data-stu-id="e7a72-190">On the Windows desktop, right-click **Windows PowerShell** on the taskbar, and then click **Run as Administrator**.</span></span>

   - <span data-ttu-id="e7a72-191">Nella schermata **Start** di Windows fare clic con il pulsante destro del mouse su **Windows PowerShell** e quindi scegliere **Esegui come amministratore**.</span><span class="sxs-lookup"><span data-stu-id="e7a72-191">On the Windows **Start** screen, right-click **Windows PowerShell**, and then click **Run as Administrator**.</span></span>

2. <span data-ttu-id="e7a72-192">**Passaggio facoltativo** Per limitare l'accesso agli utenti tramite le configurazioni di sessione:</span><span class="sxs-lookup"><span data-stu-id="e7a72-192">**Optional step** For restricting user access by using session configurations:</span></span>

   <span data-ttu-id="e7a72-193">Verificare che le configurazioni di sessione da usare esistano già nelle regole.</span><span class="sxs-lookup"><span data-stu-id="e7a72-193">Verify that the session configurations that you want to use, already exist in your rules .</span></span>

   <span data-ttu-id="e7a72-194">Se non sono ancora state create, usare le istruzioni per la creazione di configurazioni di sessione disponibili in [about_Session_Configuration_Files](/powershell/module/microsoft.powershell.core/about/about_session_configuration_files).</span><span class="sxs-lookup"><span data-stu-id="e7a72-194">If they have not yet been created, use instructions for creating session configurations in [about_Session_Configuration_Files](/powershell/module/microsoft.powershell.core/about/about_session_configuration_files).</span></span>

3. <span data-ttu-id="e7a72-195">Questa regola di autorizzazione consente a un utente specifico di accedere a un computer della rete a cui ha accesso normalmente usando una configurazione di sessione specifica con ambito limitato alle esigenze tipiche dell'utente in termini di script e cmdlet.</span><span class="sxs-lookup"><span data-stu-id="e7a72-195">This authorization rule allows a specific user access to one computer on the network to which they typically have access, with access to a specific session configuration that is scoped to the user's typical scripting and cmdlet needs.</span></span> <span data-ttu-id="e7a72-196">Digitare il comando seguente e quindi premere **INVIO**.</span><span class="sxs-lookup"><span data-stu-id="e7a72-196">Type the following, and then press **Enter**.</span></span>

   ```
   Add-PswaAuthorizationRule -UserName <domain\user | computer\user> `
      -ComputerName <computer_name> -ConfigurationName <session_configuration_name>
   ```

   - <span data-ttu-id="e7a72-197">Nell'esempio seguente, a un utente di nome _JSmith_ nel dominio _Contoso_ viene consentito l'accesso per la gestione del computer _Contoso_214_, con una configurazione di sessione denominata _NewAdminsOnly_.</span><span class="sxs-lookup"><span data-stu-id="e7a72-197">In the following example, a user named _JSmith_ in the _Contoso_ domain is granted access to manage the computer _Contoso_214_, and use a session configuration named _NewAdminsOnly_.</span></span>

   ```powershell
   Add-PswaAuthorizationRule -UserName 'Contoso\JSmith' `
      -ComputerName Contoso_214 -ConfigurationName NewAdminsOnly
   ```

4. <span data-ttu-id="e7a72-198">Eseguire il cmdlet **Get-PswaAuthorizationRule** o `Test-PswaAuthorizationRule -UserName <domain\user | computer\user> -ComputerName** <computer_name>` per verificare che la regola sia stata creata.</span><span class="sxs-lookup"><span data-stu-id="e7a72-198">Verify that the rule has been created by running either the **Get-PswaAuthorizationRule** cmdlet, or `Test-PswaAuthorizationRule -UserName <domain\user | computer\user> -ComputerName** <computer_name>`.</span></span>
   <span data-ttu-id="e7a72-199">Ad esempio: `Test-PswaAuthorizationRule -UserName Contoso\\JSmith -ComputerName Contoso_214`.</span><span class="sxs-lookup"><span data-stu-id="e7a72-199">For example, `Test-PswaAuthorizationRule -UserName Contoso\\JSmith -ComputerName Contoso_214`.</span></span>

#### <a name="to-remove-an-authorization-rule"></a><span data-ttu-id="e7a72-200">Per rimuovere una regola di autorizzazione</span><span class="sxs-lookup"><span data-stu-id="e7a72-200">To remove an authorization rule</span></span>

1. <span data-ttu-id="e7a72-201">Se non è ancora stata aperta una sessione di Windows PowerShell, vedere il passaggio 1 della procedura [Per aggiungere una regola di autorizzazione restrittiva](#to-add-a-restrictive-authorization-rule) in questa sezione.</span><span class="sxs-lookup"><span data-stu-id="e7a72-201">If a Windows PowerShell session is not already open, see step 1 of [to add a restrictive authorization rule](#to-add-a-restrictive-authorization-rule) in this section.</span></span>

2. <span data-ttu-id="e7a72-202">Digitare il comando seguente e premere **INVIO**. *ID regola* rappresenta l'ID univoco della regola che si vuole rimuovere.</span><span class="sxs-lookup"><span data-stu-id="e7a72-202">Type the following, and then press **Enter**, where *rule ID* represents the unique ID number of the rule that you want to remove.</span></span>

   ```
   Remove-PswaAuthorizationRule -ID <rule ID>
   ```

   <span data-ttu-id="e7a72-203">In alternativa, se non si conosce l'ID ma si conosce il nome descrittivo della regola da rimuovere, è possibile ottenere il nome della regola e inviarlo tramite pipe al cmdlet `Remove-PswaAuthorizationRule` per rimuovere la regola, come illustrato nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="e7a72-203">Alternatively, if you do not know the ID number, but know the friendly name of the rule you want to remove, you can get the name of the rule, and pipe it to the `Remove-PswaAuthorizationRule` cmdlet to remove the rule, as shown in the following example:</span></span>

   ```
   Get-PswaAuthorizationRule `
      -RuleName <rule-name> | Remove-PswaAuthorizationRule
   ```

> [!NOTE]
> <span data-ttu-id="e7a72-204">Non viene richiesto se si vuole eliminare la regola di autorizzazione specificata, perché l'eliminazione avviene infatti quando si premere **INVIO**.</span><span class="sxs-lookup"><span data-stu-id="e7a72-204">You are not prompted to confirm whether you want to delete the specified authorization rule; the rule is deleted when you press **Enter**.</span></span> <span data-ttu-id="e7a72-205">Assicurarsi di voler rimuovere la regola di autorizzazione prima di eseguire il cmdlet `Remove-PswaAuthorizationRule`.</span><span class="sxs-lookup"><span data-stu-id="e7a72-205">Be sure that you want to remove the authorization rule before running the `Remove-PswaAuthorizationRule` cmdlet.</span></span>

#### <a name="other-authorization-rule-scenario-examples"></a><span data-ttu-id="e7a72-206">Altri scenari di esempio per le regole di autorizzazione</span><span class="sxs-lookup"><span data-stu-id="e7a72-206">Other authorization rule scenario examples</span></span>

<span data-ttu-id="e7a72-207">Per ogni sessione di Windows PowerShell viene usata una configurazione di sessione. Se non è specificata, Windows PowerShell usa la configurazione di sessione predefinita incorporata in Windows PowerShell, denominata Microsoft.PowerShell,</span><span class="sxs-lookup"><span data-stu-id="e7a72-207">Every Windows PowerShell session uses a session configuration; if one is not specified for a session, Windows PowerShell uses the default, built-in Windows PowerShell session configuration, called Microsoft.PowerShell.</span></span> <span data-ttu-id="e7a72-208">che include tutti i cmdlet disponibili in un computer.</span><span class="sxs-lookup"><span data-stu-id="e7a72-208">The default session configuration includes all cmdlets that are available on a computer.</span></span> <span data-ttu-id="e7a72-209">Gli amministratori possono limitare l'accesso a tutti i computer definendo una configurazione di sessione basata su uno spazio di esecuzione con restrizioni, ovvero un insieme limitato di attività e cmdlet che possono essere eseguiti dagli utenti finali.</span><span class="sxs-lookup"><span data-stu-id="e7a72-209">Administrators can restrict access to all computers by defining a session configuration with a restricted runspace (a limited range of cmdlets and tasks that their end users could perform).</span></span> <span data-ttu-id="e7a72-210">Se si consente a un utente di accedere a un computer, con accesso al linguaggio completo o solo ai cmdlet di Windows PowerShell per la gestione remota, tale utente potrà connettersi agli altri computer connessi al primo.</span><span class="sxs-lookup"><span data-stu-id="e7a72-210">A user who is granted access to one computer with either full language access or only the Windows PowerShell remote management cmdlets can connect to other computers that are connected to the first computer.</span></span> <span data-ttu-id="e7a72-211">Definendo uno spazio di esecuzione con restrizioni si impedisce agli utenti di accedere ad altri computer dal relativo spazio di esecuzione di Windows PowerShell consentito, aumentando la sicurezza dell'ambiente Accesso Web Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e7a72-211">Defining a restricted runspace can prevent users from accessing other computers from their allowed Windows PowerShell runspace, and improves the security of your Windows PowerShell Web Access environment.</span></span> <span data-ttu-id="e7a72-212">La configurazione di sessione può essere distribuita, usando Criteri di gruppo, a tutti i computer che gli amministratori vogliono rendere accessibili con Accesso Web Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e7a72-212">The session configuration can be distributed (by using Group Policy) to all computers that administrators want to make accessible through Windows PowerShell Web Access.</span></span> <span data-ttu-id="e7a72-213">Per altre informazioni sulle configurazioni di sessione, vedere [about_Session_Configurations](/powershell/module/Microsoft.PowerShell.Core/About/about_session_configurations).</span><span class="sxs-lookup"><span data-stu-id="e7a72-213">For more information about session configurations, see [about_Session_Configurations](/powershell/module/Microsoft.PowerShell.Core/About/about_session_configurations).</span></span>
<span data-ttu-id="e7a72-214">Di seguito sono riportati alcuni esempi relativi a questo scenario.</span><span class="sxs-lookup"><span data-stu-id="e7a72-214">The following are some examples of this scenario.</span></span>

- <span data-ttu-id="e7a72-215">Un amministratore crea un endpoint, denominato **EndpointPswa** e basato su uno spazio di esecuzione con restrizioni,</span><span class="sxs-lookup"><span data-stu-id="e7a72-215">An administrator creates an endpoint, called **PswaEndpoint**, with a restricted runspace.</span></span> <span data-ttu-id="e7a72-216">quindi crea la regola `*,*,PswaEndpoint` e distribuisce l'endpoint agli altri computer.</span><span class="sxs-lookup"><span data-stu-id="e7a72-216">Then, the administrator creates a rule, `*,*,PswaEndpoint`, and distributes the endpoint to other computers.</span></span> <span data-ttu-id="e7a72-217">La regola consente a tutti gli utenti di accedere a tutti i computer con endpoint **EndpointPswa**.</span><span class="sxs-lookup"><span data-stu-id="e7a72-217">The rule allows all users to access all computers with the endpoint **PswaEndpoint**.</span></span>
  <span data-ttu-id="e7a72-218">Se questa è l'unica regola di autorizzazione definita nel set di regole, i computer che non dispongono di tale endpoint non sono accessibili.</span><span class="sxs-lookup"><span data-stu-id="e7a72-218">If this is the only authorization rule defined in the rule set, computers without that endpoint would not be accessible.</span></span>

- <span data-ttu-id="e7a72-219">L'amministratore ha creato un endpoint basato su uno spazio di esecuzione con restrizioni denominato **EndpointPswa** e vuole limitare l'accesso a utenti specifici.</span><span class="sxs-lookup"><span data-stu-id="e7a72-219">The administrator created an endpoint with a restricted runspace called **PswaEndpoint**,and wants to restrict access to specific users.</span></span> <span data-ttu-id="e7a72-220">L'amministratore crea un gruppo di utenti denominato **Level1Support** e definisce la regola seguente: **Level1Support,\*,PswaEndpoint**.</span><span class="sxs-lookup"><span data-stu-id="e7a72-220">The administrator creates a group of users called **Level1Support**, and defines the following rule: **Level1Support,\*,PswaEndpoint**.</span></span> <span data-ttu-id="e7a72-221">La regola concede agli utenti del gruppo **SupportoLivello1** l'accesso a tutti i computer che dispongono della configurazione **EndpointPswa**.</span><span class="sxs-lookup"><span data-stu-id="e7a72-221">The rule grants any users in the group **Level1Support** access to all computers with the **PswaEndpoint** configuration.</span></span> <span data-ttu-id="e7a72-222">Analogamente, è possibile impostare l'accesso con restrizioni per un insieme di computer specifico.</span><span class="sxs-lookup"><span data-stu-id="e7a72-222">Similarly, access can be restricted to a specific set of computers.</span></span>

- <span data-ttu-id="e7a72-223">Alcuni amministratori forniscono maggiori diritti di accesso a determinati utenti,</span><span class="sxs-lookup"><span data-stu-id="e7a72-223">Some administrators provide certain users more access than others.</span></span> <span data-ttu-id="e7a72-224">ad esempio creando i due gruppi di utenti **Amministratori** e **SupportoBase**.</span><span class="sxs-lookup"><span data-stu-id="e7a72-224">For example, an administrator creates two user groups, **Admins** and **BasicSupport**.</span></span> <span data-ttu-id="e7a72-225">L'amministratore crea anche un endpoint basato su uno spazio di esecuzione con restrizioni denominato **EndpointPswa** e definisce le due regole seguenti: **Amministratori,\*,\*** e **SupportoBase,\*,EndpointPswa**.</span><span class="sxs-lookup"><span data-stu-id="e7a72-225">The administrator also creates an endpoint with a restricted runspace called **PswaEndpoint**, and defines the following two rules: **Admins,\*,\*** and **BasicSupport,\*,PswaEndpoint**.</span></span> <span data-ttu-id="e7a72-226">La prima regola fornisce l'accesso a tutti i computer a tutti gli utenti del gruppo **Amministratori**, mentre la seconda consente a tutti gli utenti del gruppo **SupportoBase** di accedere solo ai computer con **EndpointPswa**.</span><span class="sxs-lookup"><span data-stu-id="e7a72-226">The first rule provides all users in the **Admin** group access to all computers, and the second rule provides all users in the **BasicSupport** group access only to those computers with **PswaEndpoint**.</span></span>

- <span data-ttu-id="e7a72-227">Un amministratore ha configurato un ambiente di test privato e desidera consentire a tutti gli utenti autorizzati della rete di accedere a tutti i computer della rete che utilizzando normalmente, con accesso a tutte le configurazioni di sessione che utilizzando normalmente.</span><span class="sxs-lookup"><span data-stu-id="e7a72-227">An administrator has set up a private test environment, and wants to allow all authorized network users access to all computers on the network to which they typically have access, with access to all session configurations to which they typically have access.</span></span> <span data-ttu-id="e7a72-228">Poiché si tratta di un ambiente di test privato, l'amministratore crea una regola di autorizzazione non sicura.</span><span class="sxs-lookup"><span data-stu-id="e7a72-228">Because this is a private test environment, the administrator creates an authorization rule that is not secure.</span></span> <span data-ttu-id="e7a72-229">- L'amministratore esegue il cmdlet `Add-PswaAuthorizationRule * * *`, che utilizza il carattere jolly **\*** per rappresentare tutti gli utenti, tutti i computer e tutte le configurazioni.</span><span class="sxs-lookup"><span data-stu-id="e7a72-229">- The administrator runs the cmdlet `Add-PswaAuthorizationRule * * *`, which uses the wildcard character **\*** to represent all users, all computers, and all configurations.</span></span> <span data-ttu-id="e7a72-230">- Questa regola equivale alla seguente: `Add-PswaAuthorizationRule -UserName * -ComputerName * -ConfigurationName *`.</span><span class="sxs-lookup"><span data-stu-id="e7a72-230">- This rule is the equivalent of the following: `Add-PswaAuthorizationRule -UserName * -ComputerName * -ConfigurationName *`.</span></span>

  > [!NOTE]
  > <span data-ttu-id="e7a72-231">Non è consigliabile usare questa regola in un ambiente sicuro, perché elude il livello di sicurezza fornito da Accesso Web Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e7a72-231">This rule is not recommended in a secure environment, and bypasses the authorization rule layer of security provided by Windows PowerShell Web Access.</span></span>

- <span data-ttu-id="e7a72-232">Un amministratore deve consentire agli utenti di connettersi ai computer di destinazione di un ambiente che include sia gruppi di lavoro che domini. I computer dei gruppi di lavoro vengono talvolta utilizzati per connettersi ai computer di destinazione nei domini e i computer dei domini vengono talvolta utilizzati per connettersi a computer di destinazione nei gruppi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="e7a72-232">An administrator must allow users to connect to target computers in an environment that includes both workgroups and domains, where workgroup computers are occasionally used to connect to target computers in domains, and computers in domains are occasionally used to connect to target computers in workgroups.</span></span> <span data-ttu-id="e7a72-233">L'amministratore ha incluso il server gateway, *PswaServer*, nel gruppo di lavoro e il computer di destinazione *srv1.contoso.com* in un dominio.</span><span class="sxs-lookup"><span data-stu-id="e7a72-233">The administrator has a gateway server, *PswaServer*, in a workgroup; and target computer *srv1.contoso.com* is in a domain.</span></span> <span data-ttu-id="e7a72-234">*Chris* è un utente locale autorizzato sia nel server gateway del gruppo di lavoro che nel computer di destinazione.</span><span class="sxs-lookup"><span data-stu-id="e7a72-234">User *Chris* is an authorized local user on both the workgroup gateway server and the target computer.</span></span> <span data-ttu-id="e7a72-235">Nel server del gruppo di lavoro il suo nome utente è *chrisLocal*, mentre nel computer di destinazione è *contoso\\chris*.</span><span class="sxs-lookup"><span data-stu-id="e7a72-235">His user name on the workgroup server is *chrisLocal*; and his user name on the target computer is *contoso\\chris*.</span></span> <span data-ttu-id="e7a72-236">Per autorizzare Chris ad accedere a srv1.contoso.com, l'amministratore aggiunge la regola seguente.</span><span class="sxs-lookup"><span data-stu-id="e7a72-236">To authorize access to srv1.contoso.com for Chris, the administrator adds the following rule.</span></span>

```powershell
Add-PswaAuthorizationRule -userName PswaServer\chrisLocal `
   -computerName srv1.contoso.com -configurationName Microsoft.PowerShell
```

<span data-ttu-id="e7a72-237">Tale regola consente di autenticare Chris nel server gateway e autorizzarne l'accesso a *srv1*.</span><span class="sxs-lookup"><span data-stu-id="e7a72-237">The preceding rule example authenticates Chris on the gateway server, and then authorizes his access to *srv1*.</span></span> <span data-ttu-id="e7a72-238">Nella pagina di accesso Chris deve specificare un secondo set di credenziali nell'area **Impostazioni di connessione facoltative** (*contoso\\chris*).</span><span class="sxs-lookup"><span data-stu-id="e7a72-238">On the sign-in page, Chris must provide a second set of credentials in the **Optional connection settings** area (*contoso\\chris*).</span></span> <span data-ttu-id="e7a72-239">Il server gateway usa il set di credenziali aggiuntivo per autenticare l'utente nel computer di destinazione, *srv1.contoso.com*.</span><span class="sxs-lookup"><span data-stu-id="e7a72-239">The gateway server uses the additional set of credentials to authenticate him on the target computer, *srv1.contoso.com*.</span></span>

<span data-ttu-id="e7a72-240">Nello scenario precedente Accesso Web Windows PowerShell può stabilire la connessione al computer di destinazione solo se le operazioni seguenti riescono e sono consentite almeno da una regola di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="e7a72-240">In the preceding scenario, Windows PowerShell Web Access establishes a successful connection to the target computer only after the following have been successful, and allowed by at least one authorization rule.</span></span>

1. <span data-ttu-id="e7a72-241">Autenticazione nel server gateway del gruppo di lavoro, con l'aggiunta di un nome utente con formato *nome_server*\\*nome_utente* alla regola di autorizzazione</span><span class="sxs-lookup"><span data-stu-id="e7a72-241">Authentication on the workgroup gateway server by adding a user name in the format *server_name*\\*user_name* to the authorization rule</span></span>

2. <span data-ttu-id="e7a72-242">Autenticazione nel computer di destinazione con le credenziali alternative specificate nell'area **Impostazioni di connessione facoltative** della pagina di accesso</span><span class="sxs-lookup"><span data-stu-id="e7a72-242">Authentication on the target computer by using alternate credentials provided on the sign-in page, in the **Optional connection settings** area</span></span>

   > [!NOTE]
   > <span data-ttu-id="e7a72-243">Se il gateway e i computer di destinazione si trovano in gruppi di lavoro o domini diversi, è necessario stabilire una relazione di trust tra i computer nei due gruppi di lavoro, i due domini o tra il gruppo di lavoro e il dominio.</span><span class="sxs-lookup"><span data-stu-id="e7a72-243">If gateway and target computers are in different workgroups or domains, a trust relationship must be established between the two workgroup computers, the two domains, or between the workgroup and the domain.</span></span> <span data-ttu-id="e7a72-244">Tale relazione non può essere configurata usando i cmdlet di Accesso Web Windows PowerShell per le regole di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="e7a72-244">This relationship cannot be configured by using Windows PowerShell Web Access authorization rule cmdlets.</span></span> <span data-ttu-id="e7a72-245">Le regole di autorizzazione non definiscono una relazione di trust fra computer, ma si limitano ad autorizzare gli utenti a connettersi a specifici computer di destinazione e configurazioni di sessione.</span><span class="sxs-lookup"><span data-stu-id="e7a72-245">Authorization rules do not define a trust relationship between computers; they can only authorize users to connect to specific target computers and session configurations.</span></span> <span data-ttu-id="e7a72-246">Per altre informazioni su come configurare una relazione di trust fra domini diversi, vedere l'articolo relativo alla [creazione di relazioni di trust fra domini e foreste](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc794775(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="e7a72-246">For more information about how to configure a trust relationship between different domains, see [Creating Domain and Forest Trusts](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc794775(v=ws.10)).</span></span>
   > <span data-ttu-id="e7a72-247">Per ulteriori informazioni su come aggiungere i computer del gruppo di lavoro a un elenco di host attendibili, vedere l'articolo relativo alla [gestione remota con Server Manager](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/dd759202(v=ws.11)).</span><span class="sxs-lookup"><span data-stu-id="e7a72-247">For more information about how to add workgroup computers to a trusted hosts list, see [Remote Management with Server Manager](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/dd759202(v=ws.11)).</span></span>

### <a name="using-a-single-set-of-authorization-rules-for-multiple-sites"></a><span data-ttu-id="e7a72-248">Utilizzo di un singolo set di regole di autorizzazione per più siti</span><span class="sxs-lookup"><span data-stu-id="e7a72-248">Using a single set of authorization rules for multiple sites</span></span>

<span data-ttu-id="e7a72-249">Le regole di autorizzazione sono archiviate in un file XML,</span><span class="sxs-lookup"><span data-stu-id="e7a72-249">Authorization rules are stored in an XML file.</span></span> <span data-ttu-id="e7a72-250">Per impostazione predefinita, il nome del percorso del file XML è `$env:windir\Web\PowershellWebAccess\data\AuthorizationRules.xml`.</span><span class="sxs-lookup"><span data-stu-id="e7a72-250">By default, the path name of the XML file is `$env:windir\Web\PowershellWebAccess\data\AuthorizationRules.xml`.</span></span>

<span data-ttu-id="e7a72-251">Il percorso del file XML delle regole di autorizzazione è archiviato nel file **powwa.config**, disponibile in `$env:windir\Web\PowershellWebAccess\data`.</span><span class="sxs-lookup"><span data-stu-id="e7a72-251">The path to the authorization rules XML file is stored in the **powwa.config** file, which is found in `$env:windir\Web\PowershellWebAccess\data`.</span></span> <span data-ttu-id="e7a72-252">L'amministratore ha la possibilità di modificare il riferimento al percorso predefinito in **powwa.config**, per soddisfare preferenze o requisiti specifici.</span><span class="sxs-lookup"><span data-stu-id="e7a72-252">The administrator has the flexibility to change the reference to the default path in **powwa.config** to suit preferences or requirements.</span></span> <span data-ttu-id="e7a72-253">La possibilità di modificare il percorso del file consente di usare le stesse regole di autorizzazione per più gateway di Accesso Web Windows PowerShell, se si vuole creare una configurazione di questo tipo.</span><span class="sxs-lookup"><span data-stu-id="e7a72-253">Allowing the administrator to change the location of the file lets multiple Windows PowerShell Web Access gateways use the same authorization rules, if such a configuration is desired.</span></span>

## <a name="session-management"></a><span data-ttu-id="e7a72-254">Gestione delle sessioni</span><span class="sxs-lookup"><span data-stu-id="e7a72-254">Session management</span></span>

<span data-ttu-id="e7a72-255">Per impostazione predefinita, Accesso Web Windows PowerShell consente un massimo di tre sessioni contemporanee per utente.</span><span class="sxs-lookup"><span data-stu-id="e7a72-255">By default, Windows PowerShell Web Access limits a user to three sessions at one time.</span></span> <span data-ttu-id="e7a72-256">Per modificare il numero di sessioni supportato per ogni utente, è possibile modificare il file **web.config** dell'applicazione Web in Gestione IIS.</span><span class="sxs-lookup"><span data-stu-id="e7a72-256">You can edit the web application's **web.config** file in IIS Manager to support a different number of sessions per user.</span></span> <span data-ttu-id="e7a72-257">Il percorso del file **web.config** è `$env:windir\Web\PowerShellWebAccess\wwwroot\Web.config`.</span><span class="sxs-lookup"><span data-stu-id="e7a72-257">The path to the **web.config** file is `$env:windir\Web\PowerShellWebAccess\wwwroot\Web.config`.</span></span>

<span data-ttu-id="e7a72-258">Per impostazione predefinita, il server Web IIS è configurato in modo da riavviare il pool di applicazioni in caso di modifica delle impostazioni.</span><span class="sxs-lookup"><span data-stu-id="e7a72-258">By default, IIS Web Server is configured to restart the application pool if any settings are edited.</span></span> <span data-ttu-id="e7a72-259">Ad esempio, se si modifica il file **web.config**, il pool di applicazioni viene riavviato.</span><span class="sxs-lookup"><span data-stu-id="e7a72-259">For example, the application pool is restarted if changes are made to the **web.config** file.</span></span> <span data-ttu-id="e7a72-260">Dal momento che **Accesso Web Windows PowerShell** usa gli stati sessione in memoria, gli utenti connessi alle sessioni di **Accesso Web Windows PowerShell** perdono il proprio stato al riavvio del pool di applicazioni.</span><span class="sxs-lookup"><span data-stu-id="e7a72-260">>Because **Windows PowerShell Web Access** uses in-memory session states, >users signed in to **Windows PowerShell Web Access** sessions lose their sessions when the application pool is restarted.</span></span>

### <a name="setting-default-parameters-on-the-sign-in-page"></a><span data-ttu-id="e7a72-261">Impostazione dei parametri predefiniti nella pagina di accesso</span><span class="sxs-lookup"><span data-stu-id="e7a72-261">Setting default parameters on the sign-in page</span></span>

<span data-ttu-id="e7a72-262">Se il gateway di Accesso Web Windows PowerShell è in esecuzione in Windows Server 2012 R2, è possibile configurare valori predefiniti per le impostazioni visualizzate nella pagina di accesso di Accesso Web Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e7a72-262">If your Windows PowerShell Web Access gateway is running on Windows Server 2012 R2, you can configure default values for the settings that are displayed on the Windows PowerShell Web Access sign-in page.</span></span> <span data-ttu-id="e7a72-263">I valori devono essere configurati nel file **web.config** descritto nel paragrafo precedente.</span><span class="sxs-lookup"><span data-stu-id="e7a72-263">You can configure values in the **web.config** file that is described in the preceding paragraph.</span></span> <span data-ttu-id="e7a72-264">I valori predefiniti per le impostazioni della pagina di accesso sono disponibili nella sezione **appSettings** del file web.config. Ecco un esempio della sezione **appSettings**.</span><span class="sxs-lookup"><span data-stu-id="e7a72-264">Default values for the sign-in page settings are found in the **appSettings** section of the web.config file; the following is an example of the **appSettings** section.</span></span> <span data-ttu-id="e7a72-265">I valori validi per molte di queste impostazioni sono gli stessi di quelli dei parametri corrispondenti del cmdlet [New-PSSession](/powershell/module/Microsoft.PowerShell.Core/New-PSSession) in Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e7a72-265">Valid values for many of these settings are the same as those for the corresponding parameters of the [New-PSSession](/powershell/module/Microsoft.PowerShell.Core/New-PSSession) cmdlet in Windows PowerShell.</span></span>

<span data-ttu-id="e7a72-266">Ad esempio, la chiave `defaultApplicationName`, come illustrato nel blocco di codice seguente, corrisponde al valore della variabile di preferenza **$PSSessionApplicationName** nel computer di destinazione.</span><span class="sxs-lookup"><span data-stu-id="e7a72-266">For example, the `defaultApplicationName` key, as shown in the following code block, is the value of the **$PSSessionApplicationName** preference variable on the target computer.</span></span>

```xml
  <appSettings>
      <add key="maxSessionsAllowedPerUser" value="3"/>
      <add key="defaultPortNumber" value="5985"/>
      <add key="defaultSSLPortNumber" value="5986"/>
      <add key="defaultApplicationName" value="WSMAN"/>
      <add key="defaultUseSslSelection" value="0"/>
      <add key="defaultAuthenticationType" value="0"/>
      <add key="defaultAllowRedirection" value="0"/>
      <add key="defaultConfigurationName" value="Microsoft.PowerShell"/>
  </appSettings>
```

### <a name="time-outs-and-unplanned-disconnections"></a><span data-ttu-id="e7a72-267">Disconnessioni e timeout non pianificati</span><span class="sxs-lookup"><span data-stu-id="e7a72-267">Time-outs and unplanned disconnections</span></span>

<span data-ttu-id="e7a72-268">Per le sessioni di Accesso Web Windows PowerShell è previsto un timeout. In Accesso Web Windows PowerShell in esecuzione in Windows Server 2012, dopo 15 minuti di inattività della sessione viene visualizzato un messaggio di timeout.</span><span class="sxs-lookup"><span data-stu-id="e7a72-268">Windows PowerShell Web Access sessions time out. In Windows PowerShell Web Access running on Windows Server 2012, A time-out message is displayed to signed-in users after 15 minutes of session inactivity.</span></span> <span data-ttu-id="e7a72-269">Se l'utente non risponde entro cinque minuti dalla visualizzazione del messaggio di timeout, la sessione viene chiusa e l'utente viene disconnesso. La durata dei periodi di timeout delle sessioni può essere modificata nelle impostazioni del sito Web in Gestione IIS.</span><span class="sxs-lookup"><span data-stu-id="e7a72-269">If the user does not respond within five minutes after the time-out message is displayed, the session is ended, and the user is signed out. You can change time-out periods for sessions in the website settings in IIS Manager.</span></span>

<span data-ttu-id="e7a72-270">In Accesso Web Windows PowerShell in esecuzione in Windows Server 2012 R2, per impostazione predefinita le sessioni scadono dopo 20 minuti di inattività.</span><span class="sxs-lookup"><span data-stu-id="e7a72-270">In Windows PowerShell Web Access running on Windows Server 2012 R2, sessions time out, by default, after 20 minutes of inactivity.</span></span> <span data-ttu-id="e7a72-271">Se gli utenti vengono disconnessi da una sessione nella console basata sul Web a causa di un errore di rete, arresti non pianificati o altri errori e non perché la sessione è stata volutamente chiusa, le sessioni di Accesso Web Windows PowerShell rimarranno in esecuzione e connesse al computer di destinazione, finché non sarà trascorso il periodo di timeout sul lato client.</span><span class="sxs-lookup"><span data-stu-id="e7a72-271">If users are disconnected from sessions in the web-based console because of network errors or other unplanned shutdowns or failures, and not because they have closed the sessions themselves, the Windows PowerShell Web Access sessions continue to run, connected to target computers, until the time-out period on the client side lapses.</span></span> <span data-ttu-id="e7a72-272">La sessione viene disconnessa trascorsi i 20 minuti predefiniti o dopo il periodo di timeout specificato dall'amministratore del gateway, a seconda del valore inferiore.</span><span class="sxs-lookup"><span data-stu-id="e7a72-272">The session is disconnected after either the default 20 minutes, or after the time-out period specified by the gateway administrator, whichever is shorter.</span></span>

<span data-ttu-id="e7a72-273">Se il server gateway esegue Windows Server 2012 R2, Accesso Web Windows PowerShell consente agli utenti di riconnettersi alle sessioni salvate in un secondo momento, ma quando le sessioni vengono disconnesse a causa di errori di rete, arresti non pianificati o altri errori, gli utenti non potranno visualizzare le sessioni salvate o riconnettersi finché non sarà trascorso il periodo di timeout specificato dall'amministratore del gateway.</span><span class="sxs-lookup"><span data-stu-id="e7a72-273">If the gateway server is running Windows Server 2012 R2, Windows PowerShell Web Access lets users reconnect to saved sessions at a later time, but when network errors, unplanned shutdowns, or other failures disconnect sessions, users cannot see or reconnect to saved sessions until after the time-out period specified by the gateway administrator has lapsed.</span></span>

## <a name="see-also"></a><span data-ttu-id="e7a72-274">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="e7a72-274">See Also</span></span>

<span data-ttu-id="e7a72-275">[Installare e usare Accesso Web Windows PowerShell](/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/hh831611(v=ws.11))</span><span class="sxs-lookup"><span data-stu-id="e7a72-275">[Install and Use Windows PowerShell Web Access](/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/hh831611(v=ws.11))</span></span>

[<span data-ttu-id="e7a72-276">about_Session_Configurations</span><span class="sxs-lookup"><span data-stu-id="e7a72-276">about_Session_Configurations</span></span>](/powershell/module/microsoft.powershell.core/about/about_Session_Configurations)

<span data-ttu-id="e7a72-277">[Windows PowerShell Web Access Cmdlets](/powershell/module/powershellwebaccess/?view=winserver2012r2-ps) (Cmdlet di Accesso Web Windows PowerShell)</span><span class="sxs-lookup"><span data-stu-id="e7a72-277">[Windows PowerShell Web Access Cmdlets](/powershell/module/powershellwebaccess/?view=winserver2012r2-ps)</span></span>
